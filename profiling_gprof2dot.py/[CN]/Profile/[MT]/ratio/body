def ratio(self, outevent, inevent):
    assert (outevent not in self)
    assert (inevent in self)
    for function in compat_itervalues(self.functions):
        assert (outevent not in function)
        assert (inevent in function)
        function[outevent] = ratio(function[inevent], self[inevent])
        for call in compat_itervalues(function.calls):
            assert (outevent not in call)
            if (inevent in call):
                call[outevent] = ratio(call[inevent], self[inevent])
    self[outevent] = 1.0
