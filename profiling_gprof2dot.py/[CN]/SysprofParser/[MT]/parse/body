def parse(self):
    objects = {}
    nodes = {}
    self.element_start('profile')
    while (self.token.type == XML_ELEMENT_START):
        if (self.token.name_or_data == 'objects'):
            assert (not objects)
            objects = self.parse_items('objects')
        elif (self.token.name_or_data == 'nodes'):
            assert (not nodes)
            nodes = self.parse_items('nodes')
        else:
            self.parse_value(self.token.name_or_data)
    self.element_end('profile')
    return self.build_profile(objects, nodes)
