def parse_function_entry(self, lines):
    parents = []
    children = []
    while True:
        if (not lines):
            sys.stderr.write('warning: unexpected end of entry\n')
            return
        line = lines.pop(0)
        if line.startswith('['):
            break
        mo = self._cg_parent_re.match(line)
        if (not mo):
            sys.stderr.write(('warning: unrecognized call graph entry (1): %r\n' % line))
        else:
            parent = self.translate(mo)
            if (parent.name != '<spontaneous>'):
                parents.append(parent)
    mo = self._cg_primary_re.match(line)
    if (not mo):
        sys.stderr.write(('warning: unrecognized call graph entry (2): %r\n' % line))
        return
    else:
        function = self.translate(mo)
    while lines:
        line = lines.pop(0)
        mo = self._cg_child_re.match(line)
        if (not mo):
            sys.stderr.write(('warning: unrecognized call graph entry (3): %r\n' % line))
        else:
            child = self.translate(mo)
            if (child.name != '<spontaneous>'):
                children.append(child)
    if (function.name != '<spontaneous>'):
        function.parents = parents
        function.children = children
        self.functions[function.index] = function
