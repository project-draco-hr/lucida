{
  dataStream=inputStream;
  streamEndReached=false;
  utteranceEndSent=false;
  utteranceStarted=false;
  AudioFormat format=inputStream.getFormat();
  sampleRate=(int)format.getSampleRate();
  bigEndian=format.isBigEndian();
  String s=format.toString();
  logger.finer("input format is " + s);
  if (format.getSampleSizeInBits() % 8 != 0)   throw new Error("StreamDataSource: bits per sample must be a multiple of 8.");
  bytesPerValue=format.getSampleSizeInBits() / 8;
  AudioFormat.Encoding encoding=format.getEncoding();
  if (encoding.equals(AudioFormat.Encoding.PCM_SIGNED))   signedData=true;
 else   if (encoding.equals(AudioFormat.Encoding.PCM_UNSIGNED))   signedData=false;
 else   throw new RuntimeException("used file encoding is not supported");
  totalValuesRead=0;
}
