{
  Semiring semiring=fst.getSemiring();
  ArrayList<State> fStates=new ArrayList<State>();
  int numStates=fst.getNumStates();
  for (int i=0; i < numStates; i++) {
    State s=fst.getState(i);
    if (s.getFinalWeight() != semiring.zero()) {
      fStates.add(s);
    }
  }
  State newFinal=new State(semiring.one());
  fst.addState(newFinal);
  for (  State s : fStates) {
    s.addArc(new Arc(0,0,s.getFinalWeight(),newFinal));
    s.setFinalWeight(semiring.zero());
  }
}
