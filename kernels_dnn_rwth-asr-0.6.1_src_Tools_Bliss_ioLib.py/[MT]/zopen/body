def zopen(fileName, mode='r'):
    '\n    automatic detection for\n    compressed file types : *.gz\n    stdio                 : -, stdin, stdout, stderr\n    /dev/null             : null, nil\n\n    ATTENTION:\n    When dealing with text files use uopen instead of zopen\n    in order to support easy encoding transformations.\n    Use zopen in combination with an xml-Parser or to process\n    files containing binary data.\n    '
    if (fileName == '-'):
        if ((mode == 'w') or (mode == 'a')):
            return sys.stdout
        elif (mode == 'r'):
            return sys.stdin
        else:
            raise IOError(('stdin/stdout do not support mode "%s"' % mode))
    elif (fileName == 'stdin'):
        if (mode == 'r'):
            return sys.stdin
        else:
            raise IOError(('stdin does not support mode "%s"' % mode))
    elif (fileName == 'stdout'):
        if ((mode == 'w') or (mode == 'a')):
            return sys.stdout
        else:
            raise IOError(('stdout does not support mode "%s"' % mode))
    elif (fileName == 'stderr'):
        if ((mode == 'w') or (mode == 'a')):
            return sys.stderr
        else:
            raise IOError(('stderr does not support mode "%s"' % mode))
    elif ((fileName == 'null') or (fileName == 'nil')):
        return open('/dev/null', mode)
    elif fileName.endswith('.gz'):
        if (mode == 'w'):
            return os.popen(('gzip -fc >%s' % fileName), 'w')
        elif (mode == 'r'):
            return os.popen(('gzip -dc %s' % fileName), 'r')
        else:
            raise IOError(('unsupported mode "%s"' % mode))
    else:
        return open(fileName, mode)
