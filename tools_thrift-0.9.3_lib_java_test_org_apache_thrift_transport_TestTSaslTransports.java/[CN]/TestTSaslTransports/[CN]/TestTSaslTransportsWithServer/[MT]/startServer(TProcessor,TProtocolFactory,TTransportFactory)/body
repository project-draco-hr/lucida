{
  serverThread=new Thread(){
    public void run(){
      try {
        TServerSocket socket=new TServerSocket(new TServerSocket.ServerSocketTransportArgs().port(PORT));
        TTransportFactory factory=new TSaslServerTransport.Factory(WRAPPED_MECHANISM,SERVICE,HOST,WRAPPED_PROPS,new TestSaslCallbackHandler(PASSWORD));
        server=new TSimpleServer(new Args(socket).processor(processor).transportFactory(factory).protocolFactory(protoFactory));
        LOGGER.debug("Starting the server on port {}",PORT);
        server.serve();
      }
 catch (      Exception e) {
        e.printStackTrace();
        fail();
      }
    }
  }
;
  serverThread.start();
  Thread.sleep(1000);
}
