{
  TTransport serverTransport=serverSocket.accept();
  TTransport saslServerTransport=new TSaslServerTransport(mechanism,SERVICE,HOST,props,new TestSaslCallbackHandler(PASSWORD),serverTransport);
  saslServerTransport.open();
  byte[] inBuf=new byte[testMessage1.getBytes().length];
  saslServerTransport.readAll(inBuf,0,5);
  saslServerTransport.readAll(inBuf,5,10);
  saslServerTransport.readAll(inBuf,15,inBuf.length - 15);
  LOGGER.debug("server got: {}",new String(inBuf));
  assertEquals(new String(inBuf),testMessage1);
  LOGGER.debug("server writing: {}",testMessage2);
  saslServerTransport.write(testMessage2.getBytes());
  saslServerTransport.flush();
  saslServerTransport.close();
}
