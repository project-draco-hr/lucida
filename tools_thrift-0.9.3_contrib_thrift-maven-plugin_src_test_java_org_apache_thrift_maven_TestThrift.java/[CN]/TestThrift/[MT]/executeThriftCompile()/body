{
  final File thriftFile=new File(idlDir,"shared.thrift");
  builder.addThriftFile(thriftFile);
  final Thrift thrift=builder.build();
  assertTrue("File not found: shared.thrift",thriftFile.exists());
  assertFalse("gen-java directory should not exist",genJavaDir.exists());
  final int result=thrift.compile();
  assertEquals(0,result);
  assertFalse("gen-java directory was not removed",genJavaDir.exists());
  assertTrue("generated java code doesn't exist",new File(testRootDir,"shared/SharedService.java").exists());
}
