import sys, os
from cStringIO import StringIO
import re
from Plex import *
from Plex.Traditional import re as Re
if (__name__ == '__main__'):
    filename = sys.argv[1]
    outfilename = os.path.join(sys.argv[2], os.path.basename(filename))
    fo = open(filename, 'r')
    source = fo.read()
    fo.close()
    if (len(sys.argv) > 3):
        nsteps = int(sys.argv[3])
    else:
        nsteps = None
    source = scrub_source(source, nsteps, verbose=True)
    writefo = open(outfilename, 'w')
    writefo.write(source)
    writefo.close()
