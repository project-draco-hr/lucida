{
  int numberWords=wordSequence.size();
  ProbDepth probDepth=null;
  if (numberWords > maxDepth) {
    throw new Error("Unsupported NGram: " + wordSequence.size());
  }
  if (numberWords == maxDepth) {
    probDepth=ngramDepthCache.get(wordSequence);
    if (probDepth != null) {
      ngramHits++;
      return probDepth;
    }
    ngramMisses++;
  }
  probDepth=getNGramProbDepth(wordSequence);
  if (numberWords == maxDepth)   ngramDepthCache.put(wordSequence,probDepth);
  if (logFile != null && probDepth != null)   logFile.println(wordSequence.toString().replace("]["," ") + " : " + Float.toString(probDepth.probability)+ " : "+ probDepth.depth);
  return probDepth;
}
