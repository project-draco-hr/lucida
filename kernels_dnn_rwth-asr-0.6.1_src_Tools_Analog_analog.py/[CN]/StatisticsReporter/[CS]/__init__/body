def __init__(self, options):
    self.options = options
    try:
        self.selectFields(options.fields)
    except:
        print  >> sys.stderr, 'error selecting fields:', options.fields
        raise
    if self.isActive():
        resultFile = uopen(options.resultFile, options.encoding, 'w')
        if options.bootlog:
            self.format = TableFormatter(resultFile, self.fields)
        elif options.gui:
            self.format = QtFormatter(resultFile, self.fields)
        else:
            self.format = PrettyFormatter(resultFile, self.fields)
