def openOutputFile(self, filename):
    if (os.path.dirname(filename) and (not os.path.exists(os.path.dirname(filename)))):
        os.makedirs(os.path.dirname(filename))
    if os.path.exists(filename):
        if self.options.force_overwrite:
            print  >> sys.stderr, ('File "%s" already exists.  Overwriting as requested.' % filename)
        else:
            print  >> sys.stderr, ('Failed to create "%s". File already exists.' % filename)
            return None
    f = uopen(filename, self.options.encoding, 'w')
    return f
