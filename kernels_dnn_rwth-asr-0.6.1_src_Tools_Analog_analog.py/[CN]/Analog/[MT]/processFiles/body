def processFiles(self, files):
    segments = {}
    for fname in files:
        try:
            self.parser.parseFile(fname, segments)
        except KeyboardInterrupt:
            print  >> sys.stderr, 'keyboard interrupt'
            sys.exit(2)
        except:
            if self.options.verbose_errors:
                print  >> sys.stderr, ('%s FAILED' % fname)
                import traceback
                traceback.print_exc()
            wasParseSuccessful = False
        else:
            wasParseSuccessful = True
        self.logFilename(fname, wasParseSuccessful, (len(files) > 1))
    composeLayers(segments)
    if self.options.layer:
        segments = selectLayer(segments, self.options.layer)
    for processor in self.processors:
        processor.work(segments, self.groupBy)
        processor.sep()
