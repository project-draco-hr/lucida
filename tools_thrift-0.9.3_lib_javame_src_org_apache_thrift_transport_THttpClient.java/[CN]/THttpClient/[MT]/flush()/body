{
  byte[] data=requestBuffer_.toByteArray();
  requestBuffer_.reset();
  try {
    connection=(HttpConnection)Connector.open(url_);
    connection.setRequestMethod("POST");
    connection.setRequestProperty("Content-Type","application/x-thrift");
    connection.setRequestProperty("Accept","application/x-thrift");
    connection.setRequestProperty("User-Agent","JavaME/THttpClient");
    connection.setRequestProperty("Connection","Keep-Alive");
    connection.setRequestProperty("Keep-Alive","5000");
    connection.setRequestProperty("Http-version","HTTP/1.1");
    connection.setRequestProperty("Cache-Control","no-transform");
    if (customHeaders_ != null) {
      for (Enumeration e=customHeaders_.keys(); e.hasMoreElements(); ) {
        String key=(String)e.nextElement();
        String value=(String)customHeaders_.get(key);
        connection.setRequestProperty(key,value);
      }
    }
    OutputStream os=connection.openOutputStream();
    os.write(data);
    os.close();
    int responseCode=connection.getResponseCode();
    if (responseCode != HttpConnection.HTTP_OK) {
      throw new TTransportException("HTTP Response code: " + responseCode);
    }
    inputStream_=connection.openInputStream();
  }
 catch (  IOException iox) {
    System.out.println(iox.toString());
    throw new TTransportException(iox);
  }
}
