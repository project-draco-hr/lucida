{
  List<TMessage> msgs=Arrays.asList(new TMessage[]{new TMessage("short message name",TMessageType.CALL,0),new TMessage("1",TMessageType.REPLY,12345),new TMessage("loooooooooooooooooooooooooooooooooong",TMessageType.EXCEPTION,1 << 16),new TMessage("Janky",TMessageType.CALL,0)});
  for (  TMessage msg : msgs) {
    TMemoryBuffer buf=new TMemoryBuffer(0);
    TProtocol proto=getFactory().getProtocol(buf);
    TMessage output=null;
    proto.writeMessageBegin(msg);
    proto.writeMessageEnd();
    output=proto.readMessageBegin();
    assertEquals(msg,output);
  }
}
