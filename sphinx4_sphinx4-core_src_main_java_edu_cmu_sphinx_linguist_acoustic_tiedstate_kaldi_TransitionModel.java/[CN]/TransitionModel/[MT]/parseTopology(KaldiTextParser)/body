{
  parser.expectToken("<Topology>");
  phoneStates=new HashMap<Integer,List<HmmState>>();
  String token;
  while ("<TopologyEntry>".equals(token=parser.getToken())) {
    parser.assertToken("<TopologyEntry>",token);
    parser.expectToken("<ForPhones>");
    List<Integer> phones=new ArrayList<Integer>();
    while (!"</ForPhones>".equals(token=parser.getToken()))     phones.add(Integer.parseInt(token));
    List<HmmState> states=new ArrayList<HmmState>(3);
    while ("<State>".equals(token=parser.getToken())) {
      int id=parser.getInt();
      token=parser.getToken();
      if ("<PdfClass>".equals(token)) {
        int pdfClass=parser.getInt();
        List<Integer> transitions=new ArrayList<Integer>();
        while ("<Transition>".equals(token=parser.getToken())) {
          transitions.add(parser.getInt());
          parser.getToken();
        }
        parser.assertToken("</State>",token);
        states.add(new HmmState(id,pdfClass,transitions));
      }
    }
    for (    Integer id : phones)     phoneStates.put(id,states);
  }
  parser.assertToken("</Topology>",token);
}
