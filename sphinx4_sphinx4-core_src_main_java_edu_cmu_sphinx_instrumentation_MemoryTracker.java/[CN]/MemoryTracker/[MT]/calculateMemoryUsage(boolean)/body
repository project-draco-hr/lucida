{
  float totalMem=Runtime.getRuntime().totalMemory() / (1024.0f * 1024.0f);
  float freeMem=Runtime.getRuntime().freeMemory() / (1024.0f * 1024.0f);
  float usedMem=totalMem - freeMem;
  if (usedMem > maxMemoryUsed) {
    maxMemoryUsed=usedMem;
  }
  numMemoryStats++;
  avgMemoryUsed=((avgMemoryUsed * (numMemoryStats - 1)) + usedMem) / numMemoryStats;
  if (show) {
    System.out.println("   Mem  Total: " + memFormat.format(totalMem) + "  "+ "Free: "+ memFormat.format(freeMem));
    System.out.println("   Used: This: " + memFormat.format(usedMem) + "  "+ "Avg: "+ memFormat.format(avgMemoryUsed)+ "  "+ "Max: "+ memFormat.format(maxMemoryUsed));
  }
}
