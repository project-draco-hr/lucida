{
  TTransport inTransport=null;
  TTransport outTransport=null;
  try {
    response.setContentType("application/x-thrift");
    if (null != this.customHeaders) {
      for (      Map.Entry<String,String> header : this.customHeaders) {
        response.addHeader(header.getKey(),header.getValue());
      }
    }
    InputStream in=request.getInputStream();
    OutputStream out=response.getOutputStream();
    TTransport transport=new TIOStreamTransport(in,out);
    inTransport=transport;
    outTransport=transport;
    TProtocol inProtocol=inProtocolFactory.getProtocol(inTransport);
    TProtocol outProtocol=outProtocolFactory.getProtocol(outTransport);
    processor.process(inProtocol,outProtocol);
    out.flush();
  }
 catch (  TException te) {
    throw new ServletException(te);
  }
}
