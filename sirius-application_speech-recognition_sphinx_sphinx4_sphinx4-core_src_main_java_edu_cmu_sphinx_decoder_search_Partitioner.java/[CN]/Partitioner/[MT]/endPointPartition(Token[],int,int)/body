{
  Token pivot=tokens[end];
  float pivotScore=pivot.getScore();
  int i=start;
  int j=end - 1;
  while (true) {
    while (i < end && tokens[i].getScore() >= pivotScore)     i++;
    while (j > i && tokens[j].getScore() < pivotScore)     j--;
    if (j <= i)     break;
    Token current=tokens[j];
    setToken(tokens,j,tokens[i]);
    setToken(tokens,i,current);
  }
  setToken(tokens,end,tokens[i]);
  setToken(tokens,i,pivot);
  return i;
}
