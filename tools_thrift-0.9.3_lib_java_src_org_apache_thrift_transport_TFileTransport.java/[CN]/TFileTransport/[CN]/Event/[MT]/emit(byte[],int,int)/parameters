byte[] buf
int offset
int ndesired
