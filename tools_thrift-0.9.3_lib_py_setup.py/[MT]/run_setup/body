def run_setup(with_binary):
    if with_binary:
        extensions = dict(ext_modules=[Extension('thrift.protocol.fastbinary', sources=['src/protocol/fastbinary.c'], include_dirs=include_dirs)], cmdclass=dict(build_ext=ve_build_ext))
    else:
        extensions = dict()
    setup(name='thrift', version='0.9.3', description='Python bindings for the Apache Thrift RPC system', author='Thrift Developers', author_email='dev@thrift.apache.org', url='http://thrift.apache.org', license='Apache License 2.0', packages=['thrift', 'thrift.protocol', 'thrift.transport', 'thrift.server'], package_dir={'thrift': 'src', }, classifiers=['Development Status :: 5 - Production/Stable', 'Environment :: Console', 'Intended Audience :: Developers', 'Programming Language :: Python', 'Programming Language :: Python :: 2', 'Topic :: Software Development :: Libraries', 'Topic :: System :: Networking'], use_2to3=True, **extensions)
