{
  if (allWords == null) {
    allWords=new HashSet<Word>();
    for (    String spelling : lm.getVocabulary()) {
      Word word=dictionary.getWord(spelling);
      if (word != null) {
        allWords.add(word);
      }
    }
    if (addFillerWords) {
      allWords.addAll(Arrays.asList(dictionary.getFillerWords()));
    }
 else     if (addSilenceWord) {
      allWords.add(dictionary.getSilenceWord());
    }
  }
  return allWords;
}
