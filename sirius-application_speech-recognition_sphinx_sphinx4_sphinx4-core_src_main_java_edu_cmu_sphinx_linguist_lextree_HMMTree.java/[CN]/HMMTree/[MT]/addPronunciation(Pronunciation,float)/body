{
  Unit baseUnit;
  Unit lc;
  Unit rc;
  Node curNode;
  WordNode wordNode;
  Unit[] units=pronunciation.getUnits();
  baseUnit=units[0];
  EntryPoint ep=entryPointTable.getEntryPoint(baseUnit);
  ep.addProbability(probability);
  if (units.length > 1) {
    curNode=ep.getNode();
    lc=baseUnit;
    for (int i=1; i < units.length - 1; i++) {
      baseUnit=units[i];
      rc=units[i + 1];
      HMM hmm=hmmPool.getHMM(baseUnit,lc,rc,HMMPosition.INTERNAL);
      if (hmm == null) {
        logger.severe("Missing HMM for unit " + baseUnit.getName() + " with lc="+ lc.getName()+ " rc="+ rc.getName());
      }
 else {
        curNode=curNode.addSuccessor(hmm,probability);
      }
      lc=baseUnit;
    }
    baseUnit=units[units.length - 1];
    EndNode endNode=new EndNode(baseUnit,lc,probability);
    curNode=curNode.addSuccessor(endNode,probability);
    wordNode=curNode.addSuccessor(pronunciation,probability);
    if (wordNode.getWord().isSentenceEndWord()) {
      sentenceEndWordNode=wordNode;
    }
  }
 else {
    ep.addSingleUnitWord(pronunciation);
  }
}
