{
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ObjectOutputStream oos=new ObjectOutputStream(baos);
  TestUnion tu=TestUnion.string_field("string");
  oos.writeObject(tu);
  byte[] serialized=baos.toByteArray();
  ByteArrayInputStream bais=new ByteArrayInputStream(serialized);
  ObjectInputStream ois=new ObjectInputStream(bais);
  TestUnion tu2=(TestUnion)ois.readObject();
  assertEquals(tu,tu2);
}
