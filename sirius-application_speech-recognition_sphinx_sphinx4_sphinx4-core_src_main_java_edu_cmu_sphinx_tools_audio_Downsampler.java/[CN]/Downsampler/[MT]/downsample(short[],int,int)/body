{
  short[] temp=new short[inSamples.length];
  int inSampleIndex=-1;
  int outSampleIndex=0;
  int k=srOut;
  boolean done=false;
  while (!done) {
    int sum=0;
    for (int i=0; i < srIn; i++) {
      if (k == srOut) {
        inSampleIndex++;
        if (inSampleIndex >= inSamples.length) {
          done=true;
          break;
        }
        k=0;
      }
      sum+=inSamples[inSampleIndex];
      k++;
    }
    temp[outSampleIndex++]=(short)(sum / srIn);
  }
  return Arrays.copyOf(temp,outSampleIndex);
}
