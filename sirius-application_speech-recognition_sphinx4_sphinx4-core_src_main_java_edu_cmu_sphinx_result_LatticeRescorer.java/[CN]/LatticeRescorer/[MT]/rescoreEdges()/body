{
  for (  Edge edge : lattice.edges) {
    if (lattice.isFillerNode(edge.getToNode()))     continue;
    List<String> paths=allPathsTo("",edge,depth);
    float minProb=LogMath.LOG_ZERO;
    for (    String path : paths) {
      List<Word> wordList=new LinkedList<Word>();
      for (      String pathWord : path.split(" ")) {
        wordList.add(new Word(pathWord,null,false));
      }
      wordList.add(edge.getToNode().getWord());
      WordSequence seq=new WordSequence(wordList);
      float prob=model.getProbability(seq) * languageWeigth;
      if (minProb < prob)       minProb=prob;
    }
    edge.setLMScore(minProb);
  }
}
