{
  Map<String,Float> sums=new HashMap<String,Float>();
  for (  ClassProbability cp : wordToClassProbabilities.values()) {
    Float sum=sums.get(cp.getClassName());
    if (sum == null) {
      sums.put(cp.getClassName(),0f);
    }
 else {
      sums.put(cp.getClassName(),(float)logMath.logToLinear(cp.getLogProbability()) + sum);
    }
  }
  for (  Map.Entry<String,Float> entry : sums.entrySet()) {
    if (Math.abs(1.0 - entry.getValue()) > 0.001) {
      logger.warning("Word probabilities for class " + entry.getKey() + " sum to "+ entry.getValue());
    }
  }
}
