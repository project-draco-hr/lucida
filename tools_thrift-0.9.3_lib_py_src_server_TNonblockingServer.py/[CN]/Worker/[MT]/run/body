def run(self):
    'Process queries from task queue, stop if processor is None.'
    while True:
        try:
            (processor, iprot, oprot, otrans, callback) = self.queue.get()
            if (processor is None):
                break
            processor.process(iprot, oprot)
            callback(True, otrans.getvalue())
        except Exception:
            logger.exception('Exception while processing request')
            callback(False, '')
