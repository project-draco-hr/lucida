def open(self):
    try:
        res0 = self._resolveAddr()
        for res in res0:
            self.handle = socket.socket(res[0], res[1])
            self.handle.settimeout(self._timeout)
            try:
                self.handle.connect(res[4])
            except socket.error as e:
                if (res is not res0[(-1)]):
                    continue
                else:
                    raise e
            break
    except socket.error as e:
        if self._unix_socket:
            message = ('Could not connect to socket %s' % self._unix_socket)
        else:
            message = ('Could not connect to %s:%d' % (self.host, self.port))
        raise TTransportException(type=TTransportException.NOT_OPEN, message=message)
