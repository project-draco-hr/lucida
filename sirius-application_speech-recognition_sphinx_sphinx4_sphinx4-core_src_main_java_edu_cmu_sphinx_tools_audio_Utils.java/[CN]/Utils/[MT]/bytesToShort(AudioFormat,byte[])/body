{
  short result=0;
  Encoding encoding=format.getEncoding();
  int frameSize=format.getFrameSize();
  if (encoding == Encoding.PCM_SIGNED) {
    result=toShort(byteArray,format.isBigEndian());
    if (frameSize == 1) {
      result=(short)(result << 8);
    }
  }
 else   if (encoding == Encoding.PCM_UNSIGNED) {
    int tmp=toUnsignedShort(byteArray,format.isBigEndian());
    if (frameSize == 1) {
      tmp=tmp << 8;
    }
    result=(short)(tmp - (2 << 14));
  }
 else   if (encoding == Encoding.ULAW) {
    result=ulawTable[byteArray[0] + 128];
  }
 else {
    System.out.println("Unknown encoding: " + encoding);
  }
  return result;
}
