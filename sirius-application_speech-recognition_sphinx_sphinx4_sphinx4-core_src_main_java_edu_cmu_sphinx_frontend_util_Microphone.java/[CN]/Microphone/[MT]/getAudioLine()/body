{
  if (audioLine != null) {
    return audioLine;
  }
  try {
    logger.info("Final format: " + finalFormat);
    DataLine.Info info=new DataLine.Info(TargetDataLine.class,finalFormat);
    Mixer selectedMixer=getSelectedMixer();
    if (selectedMixer == null) {
      audioLine=(TargetDataLine)AudioSystem.getLine(info);
    }
 else {
      audioLine=(TargetDataLine)selectedMixer.getLine(info);
    }
    audioLine.addLineListener(new LineListener(){
      public void update(      LineEvent event){
        logger.info("line listener " + event);
      }
    }
);
  }
 catch (  LineUnavailableException e) {
    logger.severe("microphone unavailable " + e.getMessage());
  }
  return audioLine;
}
