def setUp(self):
    for i in xrange(50):
        try:
            self.listen_sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            self.port = random.randint(10000, 30000)
            self.listen_sock.bind(('localhost', self.port))
            self.listen_sock.listen(5)
            break
        except:
            if (i == 49):
                raise
