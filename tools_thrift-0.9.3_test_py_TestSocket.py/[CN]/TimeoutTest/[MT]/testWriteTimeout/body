def testWriteTimeout(self):
    starttime = time.time()
    try:
        socket = TSocket.TSocket('localhost', self.port)
        socket.setTimeout(10)
        socket.open()
        lsock = self.listen_sock.accept()
        while True:
            socket.write(('hi' * 100))
    except:
        self.assert_(((time.time() - starttime) < 5.0))
