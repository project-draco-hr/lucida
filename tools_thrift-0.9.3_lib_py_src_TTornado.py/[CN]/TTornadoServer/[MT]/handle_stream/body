@gen.coroutine
def handle_stream(self, stream, address):
    (host, port) = address
    trans = TTornadoStreamTransport(host=host, port=port, stream=stream, io_loop=self.io_loop)
    oprot = self._oprot_factory.getProtocol(trans)
    try:
        while (not trans.stream.closed()):
            frame = yield trans.readFrame()
            tr = TMemoryBuffer(frame)
            iprot = self._iprot_factory.getProtocol(tr)
            yield self._processor.process(iprot, oprot)
    except Exception:
        logger.exception('thrift exception in handle_stream')
        trans.close()
    logger.info('client disconnected %s:%d', host, port)
