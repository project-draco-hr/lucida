def _wrap(self, func, args, kwargs):
    if (type(func) == MethodType):
        result = func(*args, **kwargs)
    else:
        result = func(self.protocol, *args, **kwargs)
    return result
