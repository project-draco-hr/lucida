{
  try {
    if (eventHandler_ != null) {
      eventHandler_.preServe();
    }
    while (!stopped_) {
      select();
      processInterestChanges();
    }
    for (    SelectionKey selectionKey : selector.keys()) {
      cleanupSelectionKey(selectionKey);
    }
  }
 catch (  Throwable t) {
    LOGGER.error("run() exiting due to uncaught error",t);
  }
 finally {
    try {
      selector.close();
    }
 catch (    IOException e) {
      LOGGER.error("Got an IOException while closing selector!",e);
    }
    stopped_=true;
  }
}
