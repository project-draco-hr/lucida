{
  if (!startThreads()) {
    return;
  }
  if (!startListening()) {
    return;
  }
  setServing(true);
  waitForShutdown();
  setServing(false);
  stopListening();
}
