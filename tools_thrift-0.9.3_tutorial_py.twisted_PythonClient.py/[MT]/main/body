@inlineCallbacks
def main(client):
    yield client.ping()
    print 'ping()'
    sum = yield client.add(1, 1)
    print ('1+1=%d' % sum)
    work = Work()
    work.op = Operation.DIVIDE
    work.num1 = 1
    work.num2 = 0
    try:
        quotient = yield client.calculate(1, work)
        print 'Whoa? You know how to divide by zero?'
    except InvalidOperation as io:
        print ('InvalidOperation: %r' % io)
    work.op = Operation.SUBTRACT
    work.num1 = 15
    work.num2 = 10
    diff = yield client.calculate(1, work)
    print ('15-10=%d' % diff)
    log = yield client.getStruct(1)
    print ('Check log: %s' % log.value)
    reactor.stop()
