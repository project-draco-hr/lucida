{
  if (token.getWord().isSentenceEndWord()) {
    return terminalNode;
  }
  Node node=nodes.get(getNodeID(token));
  if (node == null) {
    WordSearchState wordState=(WordSearchState)token.getSearchState();
    int startFrame=-1;
    int endFrame=-1;
    if (wordState.isWordStart()) {
      startFrame=token.getFrameNumber();
    }
 else {
      endFrame=token.getFrameNumber();
    }
    node=new Node(getNodeID(token),token.getWord(),startFrame,endFrame);
    addNode(node);
  }
  return node;
}
