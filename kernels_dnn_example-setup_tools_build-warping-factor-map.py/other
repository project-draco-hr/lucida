import sys
from xml.etree.ElementTree import ElementTree
from optparse import OptionParser, OptionGroup
from collections import defaultdict
if (__name__ == '__main__'):
    parser = OptionParser()
    group = OptionGroup(parser, 'Input', 'The tool will walk through <prefix>/<alpha><suffix> and select the best warping factor for each segment.')
    parser.add_option_group(group)
    group.add_option('-p', '--prefix', dest='prefix', default='log/', help='path prefix to the scoring logs')
    group.add_option('-s', '--suffix', dest='suffix', default='.score', help='path suffix to the scoring logs')
    group.add_option('-a', '--alphas', dest='alphas', metavar='FILE', help='path to the list of warping factors')
    group = OptionGroup(parser, 'Output')
    parser.add_option_group(group)
    group.add_option('-r', '--reduced-alphas', dest='reduced_alphas', metavar='FILE', help='path to the list of seen warping factors')
    group.add_option('-m', '--map', dest='warping_map', metavar='FILE', help='path to the output map of warping factors')
    (options, args) = parser.parse_args()
    if (None in [options.alphas, options.reduced_alphas, options.warping_map]):
        parser.error('Need to set -a, -r and -m! (see -h)')
    main(options)
