{
  List<StateLevel> queue=new LinkedList<StateLevel>();
  Set<String> visitedStates=new HashSet<String>();
  startDump(out);
  queue.add(new StateLevel(startingState,0));
  while (!queue.isEmpty()) {
    StateLevel stateLevel=queue.remove(0);
    int level=stateLevel.getLevel();
    SearchState state=stateLevel.getState();
    if (!visitedStates.contains(state.getSignature())) {
      visitedStates.add(state.getSignature());
      startDumpNode(out,state,level);
      SearchStateArc[] arcs=state.getSuccessors();
      for (int i=arcs.length - 1; i >= 0; i--) {
        SearchState nextState=arcs[i].getState();
        dumpArc(out,state,arcs[i],level);
        if (depthFirst) {
          queue.add(0,new StateLevel(nextState,level + 1));
        }
 else {
          queue.add(new StateLevel(nextState,level + 1));
        }
      }
      endDumpNode(out,state,level);
    }
  }
  endDump(out);
}
