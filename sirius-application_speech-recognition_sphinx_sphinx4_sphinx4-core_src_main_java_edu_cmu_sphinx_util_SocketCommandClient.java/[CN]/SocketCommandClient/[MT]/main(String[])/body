{
  try {
    CommandInterpreter ci=new CommandInterpreter();
    final SocketCommandClient sci=new SocketCommandClient("localhost",7890);
    ci.add("s",new CommandInterface(){
      public String execute(      CommandInterpreter ci,      String[] args){
        StringBuilder cmd=new StringBuilder();
        for (int i=1; i < args.length; i++) {
          cmd.append(args[i]).append(' ');
        }
        sci.sendCommand(cmd.toString());
        return "";
      }
      public String getHelp(){
        return "send a command";
      }
    }
);
    ci.add("r",new CommandInterface(){
      public String execute(      CommandInterpreter ci,      String[] args){
        while (sci.isResponse()) {
          ci.putResponse(sci.getResponse());
        }
        return "";
      }
      public String getHelp(){
        return "receive a response";
      }
    }
);
    ci.add("sr",new CommandInterface(){
      public String execute(      CommandInterpreter ci,      String[] args){
        StringBuilder cmd=new StringBuilder();
        for (int i=1; i < args.length; i++) {
          cmd.append(args[i]).append(' ');
        }
        ci.putResponse(sci.sendCommandGetResponse(cmd.toString()));
        while (sci.isResponse()) {
          ci.putResponse(sci.getResponse());
        }
        return "";
      }
      public String getHelp(){
        return "send a command, receive a response";
      }
    }
);
    ci.setPrompt("scc-test> ");
    ci.run();
  }
 catch (  Exception e) {
    System.err.println("error occured.");
    e.printStackTrace();
    System.exit(-1);
  }
}
