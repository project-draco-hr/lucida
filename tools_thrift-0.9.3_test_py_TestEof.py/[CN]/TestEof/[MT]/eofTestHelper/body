def eofTestHelper(self, pfactory):
    trans = TTransport.TMemoryBuffer(self.make_data(pfactory))
    prot = pfactory.getProtocol(trans)
    x = Xtruct()
    x.read(prot)
    self.assertEqual(x.string_thing, 'Zero')
    self.assertEqual(x.byte_thing, 0)
    x = Xtruct()
    x.read(prot)
    self.assertEqual(x.string_thing, 'One')
    self.assertEqual(x.byte_thing, 1)
    try:
        x = Xtruct()
        x.read(prot)
    except EOFError:
        return
    self.fail('Should have gotten EOFError')
