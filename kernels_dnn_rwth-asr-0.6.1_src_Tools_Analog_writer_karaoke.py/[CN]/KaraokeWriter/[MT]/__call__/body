def __call__(self, file, data):
    self.reset()
    lines = {}
    self.updateMinMaxTimes(data)
    for record in data:
        if (not self.updateAudio(record['audio'])):
            raise ValueError()
        self.updateStartTime(record['start'])
        self.updateTraceback(record['traceback'])
        lines[self.startTime] = self.createLines(record['edit distance alignment'])
    self.write(file, lines)
