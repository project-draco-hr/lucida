{
  SearchStateArc arc;
  float insertionProbability=calculateInsertionProbability(hmmNode);
  float smearProbability=getUnigramSmear(hmmNode) + previous.getSmearTerm();
  float languageProbability=smearProbability - previous.getSmearProb();
  if (generateUnitStates) {
    arc=new LexTreeUnitState(hmmNode,getWordHistory(),previous.getSmearTerm(),smearProbability,languageProbability,insertionProbability,collapsed);
  }
 else {
    HMM hmm=hmmNode.getHMM();
    arc=new LexTreeHMMState(hmmNode,getWordHistory(),previous.getSmearTerm(),smearProbability,hmm.getInitialState(),languageProbability,insertionProbability,null,collapsed);
  }
  return arc;
}
