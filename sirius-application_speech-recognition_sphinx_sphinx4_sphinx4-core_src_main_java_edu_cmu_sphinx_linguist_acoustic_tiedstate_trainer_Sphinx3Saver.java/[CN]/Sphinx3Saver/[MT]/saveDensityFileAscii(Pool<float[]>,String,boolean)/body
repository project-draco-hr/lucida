{
  logger.info("Saving density file to: ");
  logger.info(path);
  OutputStream outputStream=StreamFactory.getOutputStream(location,path,append);
  if (outputStream == null) {
    throw new IOException("Error trying to write file " + location + path);
  }
  PrintWriter pw=new PrintWriter(outputStream,true);
  pw.print("param ");
  int numStates=pool.getFeature(NUM_SENONES,-1);
  pw.print(numStates + " ");
  int numStreams=pool.getFeature(NUM_STREAMS,-1);
  pw.print(numStreams + " ");
  int numGaussiansPerState=pool.getFeature(NUM_GAUSSIANS_PER_STATE,-1);
  pw.println(numGaussiansPerState);
  for (int i=0; i < numStates; i++) {
    pw.println("mgau " + i);
    pw.println("feat " + 0);
    for (int j=0; j < numGaussiansPerState; j++) {
      pw.print("density" + " \t" + j);
      int id=i * numGaussiansPerState + j;
      float[] density=pool.get(id);
      for (int k=0; k < vectorLength; k++) {
        pw.print(" " + density[k]);
      }
      pw.println();
    }
  }
  outputStream.close();
}
