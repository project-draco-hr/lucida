{
  Object key=getStateKey(state);
  TokenHeap th=bestTokenMap.get(key);
  Token t;
  if (th == null) {
    return null;
  }
 else   if ((t=th.get(state)) != null) {
    return t;
  }
 else   if (!th.isFull()) {
    return null;
  }
 else {
    return th.getSmallest();
  }
}
