import string
import sys
import re
import os
TRUE = 1
FALSE = 0
if (len(sys.argv) == 1):
    print 'Usage: add-parent-phrase-and-head-as-feature.py <data-file>'
    print 'FOR THIS SCRIPT TO WORK, THE NODES MUST BE ARRANGED IN ASCENDING ORDER OF NODE START-END INDICES'
    print 'THE FIRST FOUR COLUMNS SHOULD BE STANDARD'
    sys.exit(1)
infile = open(sys.argv[1])
feature_vector_list = []
modified_feature_vector_list = []
a_feature_vector = infile.readline()
while (a_feature_vector != ''):
    if (a_feature_vector == '\n'):
        modified_feature_vector_list = []
        for i in range(0, len(feature_vector_list)):
            target_index = int(string.split(feature_vector_list[i][1], '_')[0])
            start_index = int(feature_vector_list[i][2])
            end_index = int(feature_vector_list[i][3])
            if ((start_index <= target_index) and (end_index >= target_index)):
                continue
            some_list = ([] + feature_vector_list[i])
            modified_feature_vector_list = (modified_feature_vector_list + [some_list])
        for list in modified_feature_vector_list:
            print string.join(list)
        print 
        feature_vector_list = []
        modified_feature_vector_list = []
    elif ((a_feature_vector != '') and (a_feature_vector != '\n')):
        a_feature_vector_list = string.split(a_feature_vector)
        feature_vector_list.append(a_feature_vector_list)
    a_feature_vector = infile.readline()
