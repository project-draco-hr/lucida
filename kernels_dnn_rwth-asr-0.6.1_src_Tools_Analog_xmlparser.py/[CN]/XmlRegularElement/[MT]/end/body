def end(self):
    for (source, target, child) in self.transitions:
        if ((source == self.state) and (child is None) and (target == self.final)):
            self.state = self.final
            break
    else:
        raise XmlValidityError(('Premature end of regular element "%s"' % self.name))
    self.state = self.final
    if self.endHandler:
        self.endHandler()
