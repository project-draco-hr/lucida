'Implementation of non-blocking server.\n\nThe main idea of the server is to receive and send requests\nonly from the main thread.\n\nThe thread poool should be sized for concurrent tasks, not\nmaximum connections\n'
import threading
import socket
import Queue
import select
import struct
import logging
logger = logging.getLogger(__name__)
from thrift.transport import TTransport
from thrift.protocol.TBinaryProtocol import TBinaryProtocolFactory
__all__ = ['TNonblockingServer']
WAIT_LEN = 0
WAIT_MESSAGE = 1
WAIT_PROCESS = 2
SEND_ANSWER = 3
CLOSED = 4
